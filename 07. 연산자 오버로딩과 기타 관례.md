# 7. ì—°ì‚°ì ì˜¤ë²„ë¡œë”©ê³¼ ê¸°íƒ€ ê´€ë¡€
- ê´€ë¡€ : ì—°ì‚°ì„ ì§€ì›í•˜ê¸° ìœ„í•´ íŠ¹ë³„í•œ ì´ë¦„ì´ ë¶™ì€ ë©”ì†Œë“œ
  - ì–´ë–¤ ì–¸ì–´ ê¸°ëŠ¥ê³¼ ë¯¸ë¦¬ ì •í•´ì§„ ì´ë¦„ì˜ í•¨ìˆ˜ë¥¼ ì—°ê²°í•´ì£¼ëŠ” ê¸°ë²•
- ì—°ì‚°ì ì˜¤ë²„ë¡œë”©
- ìœ„ì„ í”„ë¡œí¼í‹°

## 7.1 ì‚°ìˆ  ì—°ì‚°ì ì˜¤ë²„ë¡œë”©
- ì½”í‹€ë¦°ì—ì„œ ê´€ë¡€ë¥¼ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ ë‹¨ìˆœí•œ ì˜ˆ
- BigInteger, ì»¬ë ‰ì…˜ì— ì›ì†Œ ì¶”ê°€í•˜ê¸° ë“±ì„ + ì—°ì‚°ìë¥¼ ì´ìš©í•´ í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤.

ğŸ’™ ì´í•­ ì‚°ìˆ  ì—°ì‚° ì˜¤ë²„ë¡œë”©
- plus ì—°ì‚°ì êµ¬í˜„í•˜ê¸°
  ```kotlin
  data class Point(val x: Int, val y: Int) {
      operator fun plus(other: Point) : Point {
          return Point(x + other.x, y + other.y)
      }
  }
  
  fun main () {
      val p1 = Point(10, 20)
      val p2 = Point(30, 40)
      print(p1 + p2)
  }
  
  Point(x=40, y=60)  
  ```
  - ì—°ì‚°ì ì˜¤ë²„ë¡œë”© í•¨ìˆ˜ ì•ì— operator í‚¤ì›Œë“œ í•„ìˆ˜
  - operator í‚¤ì›Œë“œë¡œ ì´ í•¨ìˆ˜ê°€ ê´€ë¡€ë¥¼ ë”°ë¥´ëŠ” í•¨ìˆ˜ì„ì„ ëª…í™•íˆ í•  ìˆ˜ ìˆë‹¤.

- ì¼ë°˜ì ìœ¼ë¡œ í™•ì¥í•¨ìˆ˜ë¡œ ê´€ë¡€ë¥¼ ë”°ë¥¸ë‹¤.
  ```kotlin
  data class Point(val x: Int, val y: Int)
  
  operator fun Point.plus(other: Point) : Point {
      return Point(x + other.x, y + other.y)
  }
  ```

- ì½”í‹€ë¦°ì€ ê°œë°œìê°€ ì§ì ‘ ì—°ì‚°ìë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•  ìˆ˜ ì—†ê³  ì–¸ì–´ì—ì„œ ë¯¸ë¦¬ ì •í•´ë‘” ì—°ì‚°ìë§Œ ì˜¤ë²„ë¡œë”© í•  ìˆ˜ ìˆë‹¤.
- ì—°ì‚°ì ìš°ì„ ìˆœìœ„ëŠ” í‘œì¤€ ìˆ«ì íƒ€ì…ì— ëŒ€í•œ ì—°ì‚°ì ìš°ì„ ìˆœìœ„ì™€ ê°™ë‹¤.

- ë‘ í”¼ì—°ì‚°ì íƒ€ì…ì´ ë‹¤ë¥¸ ì—°ì‚°ì ì˜¤ë²„ë¡œë”©ë„ ê°€ëŠ¥í•˜ë‹¤.
  ```kotlin
  data class Point(val x: Int, val y: Int)

  operator fun Point.times(scale: Double) : Point {
      return Point((x*scale).toInt(), (y*scale).toInt())
  }
  
  fun main () {
      val p = Point(10, 20)
      println(p * 1.5)
  }
  
  Point(x=15, y=30)
  ```
  - ë‹¨, ì½”í‹€ë¦°ì€ ìë™ êµí™˜ ë²•ì¹™ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.
  - 1.5 * p ë¡œ ì‚¬ìš©í•˜ë ¤ë©´, operator fun Double.times(p: Point) : Pointë¥¼ ì¶”ê°€ë¡œ ì •ì˜í•´ì•¼ í•œë‹¤.

- ë¦¬í„´ íƒ€ì…ì´ í”¼ì—°ì‚°ìì™€ ë‹¬ë¼ë„ ê´œì°®ë‹¤.
  ```kotlin
  operator fun Char.times(cnt: Int) : String {
      return toString().repeat(cnt)
  }
  
  fun main () {
      println('a' * 3)
  }
  
  aaa
  ```

ğŸ’™ ë³µí•© ëŒ€ì… ì—°ì‚°ì ì˜¤ë²„ë¡œë”©
- +=, -=ê³¼ ê°™ì€ ë³µí•© ëŒ€ì… ì—°ì‚°ì ì˜¤ë²„ë¡œë”©ë„ ì§€ì›í•œë‹¤.
- ê°ì²´ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ë°”ê¾¸ëŠ”ê²Œ ì•„ë‹ˆë¼,  
  ex) var a = 3; a += 4; í•˜ë©´ aëŠ” 7ì´ë¼ëŠ” ìˆ«ìë¥¼ ì°¸ì¡°í•˜ê²Œ ëœë‹¤.
- ê°ì²´ ë‚´ë¶€ ìƒíƒœë¥¼ ë³€ê²½í•˜ê²Œ ë§Œë“¤ê³  ì‹¶ì€ ê²½ìš°ì—”?  
  ex) ì»¬ë ‰ì…˜ì— ì›ì†Œ ì¶”ê°€í•˜ê¸° ë“±

- plusAssignì„ ì˜¤ë²„ë¡œë”© í•´ì„œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.
  ```kotlin
  operator fun <T> MutableCollection<T>.plusAssign(e: T) {
      this.add(e)
  }
  ```
  - += ëŠ” plusì™€ plusAssign ì–‘ìª½ ëª¨ë‘ë¡œ ì»´íŒŒì¼ í•  ìˆ˜ ìˆë‹¤.
  - ì–´ë–¤ í´ë˜ìŠ¤ê°€ ì´ ë‘ í•¨ìˆ˜ë¥¼ ëª¨ë‘ ì •ì˜í•˜ê³  ë‘˜ ë‹¤ +=ì— ì‚¬ìš© ê°€ëŠ¥í•˜ë©´, ì»´íŒŒì¼ëŸ¬ëŠ” ì˜¤ë¥˜ë¥¼ ë‚¸ë‹¤.

- +, - : í•­ìƒ ìƒˆë¡œìš´ ì»¬ë ‰ì…˜ ë°˜í™˜
- +=, -= : ë³€ê²½ ê°€ëŠ¥í•œ(var) ì»¬ë ‰ì…˜ì— ì‘ìš©. ë©”ëª¨ë¦¬ì— ìˆëŠ” ê°ì²´ë¥¼ ë³€í™”ì‹œí‚¨ë‹¤.  
  ë‹¨, ì½ê¸° ì „ìš© ì»¬ë ‰ì…˜ì—ì„œëŠ” ë³€ê²½ì„ ì ìš©í•œ ë³µì‚¬ë³¸ì„ ë°˜í™˜í•œë‹¤.

- ì»¬ë ‰ì…˜ì— ì‚¬ìš©ë˜ëŠ” ì˜ˆì‹œ
  ```kotlin
  fun main () {
      val list = arrayListOf(1, 2)
      list += 3
  
      val newList = list + listOf(4, 5)
      
      println(list)
      println(newList)
  }
  
  [1, 2, 3]
  [1, 2, 3, 4, 5]
  ```

ğŸ’™ ë‹¨í•­ ì—°ì‚°ì ì˜¤ë²„ë¡œë”©
- ë‹¨í•­ ì—°ì‚°ì ì •ì˜ ì˜ˆì œ
  ```kotlin
  operator fun Point.unaryMinus() : Point {
      return Point(-x, -y)
  }
  
  fun main () {
      val p = Point(10, 20)
      println(-p)
  }
  
  Point(x=-10, y=-20)
  ```
  
- ì‚¬ìš© ë°©ë²•ì€ ë™ì¼í•˜ë©°, ë‹¨í•­ ì—°ì‚°ì ì˜¤ë²„ë¡œë”© í•¨ìˆ˜ëŠ” ì¸ìë¥¼ ì·¨í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ì •í•´ì§„ ì´ë¦„  
  + (unaryPlus), -(unaryMinus), !(not), ++(inc), --(dec)

- ì¦ê° ì—°ì‚°ì ì˜¤ë²„ë¡œë”©ì˜ ê²½ìš° ì¼ë°˜ ê°’ì˜ ì¦ê° ì—°ì‚°ìì™€ ê°™ì€ ì˜ë¯¸ë¥¼ ì œê³µí•œë‹¤.

## 7.2 ë¹„êµ ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

ğŸ’™ ë™ë“±ì„± ì—°ì‚°ì : equals
- ì½”í‹€ë¦°ì—ì„œëŠ” == ì—°ì‚°ì í˜¸ì¶œë¡œ equals ë©”ì†Œë“œ í˜¸ì¶œì„ ëŒ€ì‹ í•  ìˆ˜ ìˆë‹¤. (ì»´íŒŒì¼ëŸ¬ê°€ ì¸ì‹/ ê´€ë¡€ì´ë‹¤!)
- != ì—°ì‚°ìë¥¼ ì‚¬ìš©í•´ë„ equals() í˜¸ì¶œë¡œ ì»´íŒŒì¼ ëœë‹¤.
- ==ê³¼ !=ëŠ” ì¸ìê°€ ë„ì¸ì§€ ê²€ì‚¬í•˜ë¯€ë¡œ ë‹¤ë¥¸ ì—°ì‚°ê³¼ ë‹¬ë¦¬ ë„ì´ ë  ìˆ˜ ìˆëŠ” ê°’ì—ë„ ì ìš© ê°€ëŠ¥í•˜ë‹¤.
  a == b ë¼ëŠ” ì—°ì‚°ì„ ë³´ë©´ ì»´íŒŒì¼ëŸ¬ëŠ” aê°€ ë„ì¸ì§€ íŒë‹¨ í›„ ì•„ë‹Œ ê²½ìš°ì—ë§Œ a.equals(b)ë¥¼ í˜¸ì¶œí•œë‹¤.

- dataí´ë˜ìŠ¤ì— ìˆëŠ” equals()ë¥¼ ì´ìš©í•´ ì—°ì‚°ê²°ê³¼ ë³´ê¸°
  ```kotlin
  >> println(Point(10, 20) == Point(10, 20))
  >> println(Point(10, 30) != Point(10, 20))
  >> println(null == Point(10, 20))
  
  true
  true
  false
  ```
  - ì§ì ‘ equals()ë¥¼ ì¬ì •ì˜ í•  ìˆ˜ ìˆì§€ë§Œ ì´ ë•ŒëŠ” operatorê°€ ì•„ë‹Œ overrideê°€ í•„ìš”í•˜ë‹¤.  
    Anyì˜ equals()ë¥¼ ì˜¤ë²„ë¼ì´ë”© í•˜ëŠ” ê²ƒ ì´ê¸° ë•Œë¬¸!!  
    Anyì˜ equalsì—ëŠ” operatorê°€ ë¶™ì–´ ìˆë‹¤. **

ğŸ’™ ìˆœì„œ ì—°ì‚°ì : compareTo
- ì½”í‹€ë¦°ì€ ìë°”ì²˜ëŸ¼ Comparable ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§€ì›í•œë‹¤.
- ê·¸ë¦¬ê³  compareTo ë©”ì†Œë“œ í˜¸ì¶œ ê´€ë¡€ë¥¼ ì œê³µí•œë‹¤.  
  ì¦‰, ë¹„êµì—°ì‚°ì(<, >, <=, >=)ëŠ” compareTo() í˜¸ì¶œë¡œ ì»´íŒŒì¼ ëœë‹¤.

- ì‚¬ìš© ì˜ˆì œ
  ```kotlin
  class Person (
      val firstName: String, val lastName: String
  ) : Comparable<Person> {
      override fun compareTo(other: Person): Int {
          return compareValuesBy(this, other, // ì¸ìë¡œ ë°›ì€ í•¨ìˆ˜ë¥¼ ì°¨ë¡€ë¡œ í˜¸ì¶œí•˜ë©° ê°’ì„ ë¹„êµ
              Person::lastName, Person::firstName)
      }
  }
  
  fun main () {
      val p1 = Person("Alice", "Smith")
      val p2 = Person("Bob", "John")
      println(p1 < p2)
  }
  
  false
  ```
  - compareValuesBy()ëŠ” ë‘ ê°ì²´ì™€ ì—¬ëŸ¬ ë¹„êµí•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ëŠ”ë‹¤.
  - 1~në²ˆì§¸ ë¹„êµí•¨ìˆ˜ì— ë‘ ê°ì²´ë¥¼ ìˆœì„œëŒ€ë¡œ ë„˜ê²¨, ê°ì²´ê°€ ê°™ë‹¤ëŠ” ê²°ê³¼(0)ì´ ë‚˜ì˜¤ë©´ ì´ì–´ì„œ ìˆ˜í–‰í•œë‹¤.
  - ëª¨ë‘ 0ì„ ë°˜í™˜í•˜ë©´ 0ì„ ë°˜í™˜í•´ì„œ trueì„ì„ ì•Œë¦°ë‹¤.

- ë¬¸ìì—´ì— "abc" < "bac" í•˜ë©´ trueê°€ ë‚˜ì˜´!

## 7.3 ì»¬ë ‰ì…˜ê³¼ ë²”ìœ„ì— ëŒ€í•´ ì“¸ ìˆ˜ ìˆëŠ” ê´€ë¡€
- ì»¬ë ‰ì…˜ì—ì„œ ë§ì´ ì‚¬ìš©í•˜ëŠ” [](ì¸ë±ìŠ¤ ì—°ì‚°ì)ì™€ in(ê²€ì‚¬ ì—°ì‚°ì, ì´í„°ë ˆì´ì…˜)ì„ ì§€ì›í•˜ëŠ” ê´€ë¡€ ì‚¬ìš©

ğŸ’™ ì¸ë±ìŠ¤ë¡œ ì›ì†Œì— ì ‘ê·¼ : getê³¼ set
- ì½”í‹€ë¦°ì—ì„œ ì¸ë±ìŠ¤ ì—°ì‚°ìë¥¼ ì´ìš©í•´ ê°’ì„ ì½ê±°ë‚˜ ëŒ€ì…í•˜ë©´ get ì—°ì‚°ì ë©”ì†Œë“œì™€ set ì—°ì‚°ì ë©”ì†Œë“œê°€ í˜¸ì¶œëœë‹¤.

- get ê´€ë¡€ êµ¬í˜„ ì˜ˆì œ
  ```kotlin
  operator fun Point.get(index: Int) : Int {
      return when(index) {
          0 -> x  // ì£¼ì–´ì§„ ì¸ë±ìŠ¤ì— í•´ë‹¹í•˜ëŠ” ì¢Œí‘œë¥¼ ì°¾ìŒ
          1 -> y
          else ->
              throw IndexOutOfBoundsException("Invalid coordinate ${index}")
      }
  }
  
  fun main () {
      val p = Point(10, 20)
      println(p[1])
  }
  
  20
  ```

- ì´ì°¨ì› ë°°ì—´ì˜ ê²½ìš°  operator fun get(rowIndex: Int, colIndex: Int) ë¡œ ì •ì˜ í•  ìˆ˜ ìˆë‹¤.  
  í˜¸ì¶œì€ matrix[row, col]ë¡œ í•  ìˆ˜ ìˆë‹¤.

- ì»¬ë ‰ì…˜ í´ë˜ìŠ¤ê°€ ë‹¤ì–‘í•œ í‚¤ íƒ€ì…ì„ ì§€ì›í•´ì•¼ í•˜ë©´, ë‹¤ì–‘í•œ íŒŒë¼ë¯¸í„°ì— ëŒ€í•´ ì˜¤ë²„ë¡œë”© í•œ ì—¬ëŸ¬ get() ì„ ì •ì˜ í•  ìˆ˜ ìˆë‹¤.

ğŸ’™ in ê´€ë¡€
- inì€ ê°ì²´ê°€ ì»¬ë ‰ì…˜ì— ë“¤ì–´ìˆëŠ”ì§€ ê²€ì‚¬í•œë‹¤.
- ëŒ€ì‘ í•¨ìˆ˜ëŠ” contains()ë‹¤.

- in ê´€ë¡€ êµ¬í˜„ ì˜ˆì œ
  ```kotlin
  data class Rectangle(val upperLeft: Point, val lowerRight: Point)
  operator fun Rectangle.contains(p: Point) : Boolean {
      return p.x in upperLeft.x until lowerRight.x
              && p.y in upperLeft.y until lowerRight.y
  }
  
  fun main () {
      val rect = Rectangle(Point(10, 20), Point(50, 50))
      println(Point(20, 30) in rect)
      println(Point(5, 5) in rect)
  }
  
  true
  false
  ```

ğŸ’™ rangeTo ê´€ë¡€
- ë²”ìœ„ë¥¼ ë§Œë“¤ë ¤ë©´ .. êµ¬ë¬¸ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤. (ex. 1..10 // 1~10ê¹Œì§€ì˜ ìˆ˜ê°€ ë“¤ì–´ìˆëŠ” ë²”ìœ„)
- .. ì—°ì‚°ìëŠ” rangeTo()ë‹¤.
- rangeTo()ëŠ” ì•„ë¬´ í´ë˜ìŠ¤ì— ì •ì˜í•  ìˆ˜ ìˆì§€ë§Œ, Comparable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ëŠ” rangeTo()ë¥¼  
  ì •ì˜í•  í•„ìš”ê°€ ì—†ë‹¤.
  - ì½”í‹€ë¦° í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì˜ ì§€ì›í•´ì£¼ê¸° ë•Œë¬¸ !!
- ì´ í•¨ìˆ˜ëŠ” ë²”ìœ„ë¥¼ ë°˜í™˜í•˜ê³ , ì–´ë–¤ ì›ì†Œê°€ ë²”ìœ„ì— ìˆëŠ”ì§€ inì„ í†µí•´ ê²€ì‚¬í•  ìˆ˜ ìˆë‹¤.

- ë‚ ì§œì˜ ë²”ìœ„ ë‹¤ë£¨ëŠ” ì˜ˆì œ
  ```kotlin
  fun main () {
      val now = LocalDate.now()
      val vacation = now..now.plusDays(10)    // ì˜¤ëŠ˜ ~ 10ì¼ì§œë¦¬ ë²”ìœ„ ë§Œë“¦
  
      print(now.plusWeeks(1) in vacation) // íŠ¹ì • ë‚ ì§œê°€ ë²”ìœ„ì•ˆì— ìˆëŠ”ì§€ ê²€ì‚¬
  }
  
  true
  ```
  - now..now.plusDays(10) ëŠ” ì»´íŒŒì¼ëŸ¬ì— ì˜í•´ now.rangeTo(now.plusDays(10))ìœ¼ë¡œ ë³€í™˜ëœë‹¤.

- ë‹¨, ..ì—°ì‚°ìëŠ” ìš°ì„ ìˆœìœ„ê°€ ë‚®ì•„, ê´„í˜¸ë¡œ ëª…í™•íˆ í•´ì£¼ë©´ ì¢‹ë‹¤.
  ```kotlin
  >> val n = 9
  >> print(0..(n+1))
  
  0..10
  
  >> (0..n).forEach { print(it) }
  
  0123456789
  ```

ğŸ’™ for ë£¨í”„ë¥¼ ìœ„í•œ iterator ê´€ë¡€
- for(x in list) {...} ëŠ” list.iterator()ë¥¼ í˜¸ì¶œí•´ ì´í„°ë ˆì´í„°ë¥¼ ì–»ê³ , ìë°”ì²˜ëŸ¼  
  ì´í„°ë ˆì´í„°ì— hasNext()ì™€ next()í˜¸ì¶œì„ ë°˜ë³µí•˜ëŠ” ì‹ìœ¼ë¡œ ë³€í™˜í•œë‹¤.
- ì½”í‹€ë¦°ì—ì„œ ì´ ë˜í•œ ê´€ë¡€ì´ë¯€ë¡œ, iterator()ë¥¼ í™•ì¥ í•¨ìˆ˜ë¡œ ì •ì˜í•  ìˆ˜ ìˆë‹¤.
- ë”°ë¼ì„œ ë¬¸ìì—´ì— ëŒ€í•œ for ë£¨í”„ê°€ ê°€ëŠ¥í•˜ë‹¤.
  - ì½”í‹€ë¦°ì€ Stringì˜ ìƒìœ„ í´ë˜ìŠ¤(CharSequence)ì— ëŒ€í•œ iterator() í™•ì¥ í•¨ìˆ˜ë¥¼ ì œê³µí•œë‹¤.
  - for(c in "abc")ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•¨

## 7.4 êµ¬ì¡° ë¶„í•´ ì„ ì–¸ê³¼ component í•¨ìˆ˜
- dataí´ë˜ìŠ¤ íŠ¹ì„±ì¤‘ ë‚˜ë¨¸ì§€ì™€ ì—°ê´€ ìˆìŒ
- êµ¬ì¡°ë¶„í•´ë¥¼ ì‚¬ìš©í•˜ë©´ ë³µí•©ì ì¸ ê°’ì„ ë¶„í•´í•´ì„œ ì—¬ëŸ¬ ë‹¤ë¥¸ ë³€ìˆ˜ë¥¼ í•œêº¼ë²ˆì— ì´ˆê¸°í™” í•  ìˆ˜ ìˆë‹¤.
- ì‚¬ìš© ì˜ˆì œ
  ```kotlin
  >> val p = Point(10, 20)
  >> val (x, y) = p   // xì™€ yë³€ìˆ˜ ì„ ì–¸ í›„ pì˜ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ë¡œ ì´ˆê¸°í™” í•œë‹¤.
  >> println(x)
  >> println(y)
  
  10
  20
  ```
- ì¼ë°˜ ë³€ìˆ˜ ì„ ì–¸ê³¼ ë¹„ìŠ·í•˜ë‚˜, =ì˜ ì¢Œë³€ì— ì—¬ëŸ¬ ë³€ìˆ˜ë¥¼ ê´„í˜¸ë¡œ ë¬¶ì—ˆë‹¤.
  - ë‚´ë¶€ì—ì„œ ê´€ë¡€ë¥¼ ì‚¬ìš©í•œë‹¤.
  - ì´ˆê¸°í™” ì‹œ componentN()ì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.
  - Nì€ êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì— ìˆëŠ” ë³€ìˆ˜ ìœ„ì¹˜ ë²ˆí˜¸ë‹¤.

- val (a, b) = p ëŠ”  
  val a = p.component1()  
  val b = p.component2() ë¡œ ë³€í™˜ëœë‹¤.

- componentN()ì€ data í´ë˜ìŠ¤ ì£¼ ìƒì„±ìì— ìˆëŠ” í”„ë¡œí¼í‹°ì— ëŒ€í•´ ì»´íŒŒì¼ëŸ¬ê°€ ìë™ìœ¼ë¡œ ë§Œë“ ë‹¤.

- êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì€ í•¨ìˆ˜ì—ì„œ ì—¬ëŸ¬ ê°’ì„ ë°˜í™˜í•  ë•Œ ìœ ìš©í•¨
  ```kotlin
  data class NameComponents(val name: String,
                          val extension: String) // ê°’ì„ ì €ì¥í•˜ê¸° ìœ„í•œ ë°ì´í„° í´ë˜ìŠ¤
  
  fun splitFilename(fullName: String) : NameComponents {
      val result = fullName.split('.', limit = 2)
      return NameComponents(result[0], result[1]) // ë°ì´í„° í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜
  }
  
  fun main () {
      val (name, extension) = splitFilename("example.txt")    // êµ¬ì¡°ë¶„í•´ ì„ ì–¸ êµ¬ë¬¸ì„ ì‚¬ìš©í•´ ë°ì´í„° í´ë˜ìŠ¤ë¥¼ í‘¼ë‹¤.
      println(name)
      println(extension)
  }
  
  example
  txt
  ```

ğŸ’™ êµ¬ì¡° ë¶„í•´ ì„ ì–¸ê³¼ ë£¨í”„
- ë£¨í”„, íŠ¹íˆ ë§µì˜ ì›ì†Œì— ëŒ€í•´ ì´í„°ë ˆì´ì…˜ í•  ë•Œ êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì´ ìœ ìš©í•˜ë‹¤.
- ì‚¬ìš© ì˜ˆì œ
  ```kotlin
  fun printEntries(map: Map<String, String>) {
      for((key, value) in map) {  // ë£¨í”„ ë³€ìˆ˜ë¡œ êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì„ ì‚¬ìš©
          println("${key} -> ${value}")
      }
  }
  
  fun main () {
      val map = mapOf("Oracle" to "Java", "JetBrains" to "Kotlin")
      printEntries(map)
  }
  
  Oracle -> Java
  JetBrains -> Kotlin
  ```
  - ê´€ë¡€ 2ê°€ì§€ê°€ ì‚¬ìš©ë¨
    - ì´í„°ë ˆì´ì…˜ ê´€ë¡€
    - êµ¬ì¡° ë¶„í•´ ì„ ì–¸
  - ìë°”ì™€ ë‹¬ë¦¬ ì½”í‹€ë¦°ì€ ë§µì„ ì§ì ‘ ì´í„°ë ˆì´ì…˜ í•  ìˆ˜ ìˆë‹¤.

## 7.5 í”„ë¡œí¼í‹° ì ‘ê·¼ì ë¡œì§ ì¬í™œìš© : ìœ„ì„ í”„ë¡œí¼í‹°
- í”„ë¡œí¼í‹°ëŠ” ìœ„ì„ ê°ì²´ë¥¼ ì´ìš©í•´ ìì‹ ì˜ ê°’ì„ í•„ë“œê°€ ì•„ë‹Œ DBë‚˜ ë¸Œë¼ìš°ì € ì„¸ì…˜, ë§µ ë“±ì— ì €ì¥í•  ìˆ˜ ìˆë‹¤.

ğŸ’™ ìœ„ì„ í”„ë¡œí¼í‹° ì†Œê°œ
- ì‚¬ìš© ë¬¸ë²•
  ```kotlin
  class Foo {
      var p: Type by Delegate()
  }
  ```
  - p í”„ë¡œí¼í‹° : ì ‘ê·¼ì ë¡œì§ì„ ë‹¤ë¥¸ ê°ì²´ì— ìœ„ì„
  - Delegate í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ : ìœ„ì„ ê°ì²´ë¡œ ì‚¬ìš©
    - by ë’¤ì˜ ì‹ì„ ê³„ì‚°í•´ì„œ ìœ„ì„ ê°ì²´ì— ì“°ì¼ ê°ì²´ë¥¼ ì–»ìŒ (í”„ë¡œí¼í‹° & ìœ„ì„ê°ì²´ ì—°ê²°)
  - í”„ë¡œí¼í‹° ìœ„ì„ ê°ì²´ê°€ ë”°ë¼ì•¼ í•˜ëŠ” ê´€ë¡€ë¥¼ ë”°ë¥´ëŠ” ëª¨ë“  ê°ì²´ë¥¼ ìœ„ì„ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

- ì‚¬ìš© ì˜ˆì‹œ
  ```kotlin
  >> val foo = Foo()
  >> val oldVal = (foo)   // pëŠ” ë‚´ë¶€ì—ì„œ delegate.getValue(..)ë¥¼ í˜¸ì¶œí•œë‹¤.
  >> foo.p = newValue     // pëŠ” ë‚´ë¶€ì—ì„œ delegate.setValue(.., newValue)ë¥¼ í˜¸ì¶œí•œë‹¤.
  ```

ğŸ’™ ìœ„ì„ í”„ë¡œí¼í‹° ì‚¬ìš© : by lazy()ë¥¼ ì‚¬ìš©í•œ í”„ë¡œí¼í‹° ì´ˆê¸°í™” ì§€ì—°
- ì§€ì—°ì´ˆê¸°í™”ëŠ” ê°ì²´ì˜ ì¼ë¶€ë¶„ì„ ì´ˆê¸°í™” í•˜ì§€ ì•Šê³ , ì‹¤ì œ ê·¸ ë¶€ë¶„ì˜ ê°’ì´ í•„ìš”í•  ë•Œ ì´ˆê¸°í™” í•´ì„œ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´
- ì˜ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ê°’ì„ DBì—ì„œ ë¶ˆëŸ¬ì™€ì•¼ í•˜ëŠ” ê²½ìš° ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.
  - ì„ì‹œì ìœ¼ë¡œ NULLê°’ìœ¼ë¡œ ë‘ê³  ì‹¤ì œ ì‚¬ìš©ë  ë•Œ ì´ˆê¸°í™” í•˜ëŠ” ê¸°ë²•

- ì§€ì—° ì´ˆê¸°í™” êµ¬í˜„ ì˜ˆì œ (ì´ë©”ì¼ì„ ë‚˜ì¤‘ì— DBì—ì„œ ë¶ˆëŸ¬ì™€ ì´ˆê¸°í™”)
  ```kotlin
  class Email (
      val email : String
  )
  
  fun loadEmails(person: Person) : List<Email> {
      return listOf(/*...*/)
  }
  
  class Person(val name: String) {
      private var _emails: List<Email>? = null    // ë°ì´í„° ì €ì¥ ë° emailsì˜ ìœ„ì„ê°ì²´ ì—­í• 
      val emails: List<Email>
          get() {
              if(_emails == null) {   // ìµœì´ˆ ì ‘ê·¼ì‹œ ë©”ì¼ì„ ê°€ì ¸ì˜´
                  _emails = loadEmails(this)
              }
              return _emails!!;   // ì €ì¥í•´ ë‘” ë°ì´í„°ê°€ ìˆìœ¼ë©´ ë°˜í™˜
          }
  }
  fun main () {
      val p = Person("Alice")
      p.emails    // ìµœì´ˆ eamilsë¥¼ ì½ì„ ë•Œ í•œ ë²ˆë§Œ ì´ë©”ì¼ì„ ê°€ì ¸ì˜´
  }
  ```
  - ë’·ë°”ì¹¨ í”„ë¡œí¼í‹° ê¸°ë²•ì„ ì‚¬ìš©í•¨
  - _emails í”„ë¡œí¼í‹°
    - ê°’ì„ ì €ì¥
    - null ê°€ëŠ¥
  - emails í”„ë¡œí¼í‹°
    - _emailsë¼ëŠ” í”„ë¡œí¼í‹°ì— ëŒ€í•œ ì½ê¸° ì—°ì‚°ì„ ì œê³µ
    - null ë¶ˆê°€ëŠ¥
  - ìœ„ ë°©ë²•
    - ì§€ì—° ì´ˆê¸°í™” í•´ì•¼í•˜ëŠ” í”„ë¡œí¼í‹°ê°€ ë§ì•„ì§€ë©´ ë³µì¡í•¨
    - thread-safe í•˜ì§€ ì•ŠìŒ
  - ìœ„ì„ í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ë©´ ë”ìš± ê°„ë‹¨í•´ ì§!

- ì§€ì—° ì´ˆê¸°í™”ë¥¼ ìœ„ì„ í”„ë¡œí¼í‹°ë¥¼ í†µí•´ êµ¬í˜„
  ```kotlin
  class Person(val name: String) {
      val emails by lazy { loadEmails(this) }
  }
  ```
  - ìœ„ì„ í”„ë¡œí¼í‹°ëŠ” ë°ì´í„° ì €ì¥ ì‹œ ì“°ì´ëŠ” ë’·ë°›ì¹¨ í”„ë¡œí¼í‹°ì™€ ê°’ì´ í•œ ë²ˆë§Œ ì´ˆê¸°í™”ë¨ì„ ë³´ì¥í•˜ëŠ” getter ë¡œì§ì„ í•¨ê»˜ ìº¡ìŠí™”í•¨
  - ì´ëŸ¬í•œ ìœ„ì„ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ í•¨ìˆ˜ -> lazy
  - lazyë¥¼ byì™€ í•¨ê»˜ ì‚¬ìš©í•´ ìœ„ì„ í”„ë¡œí¼í‹°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

ğŸ’™ ìœ„ì„ í”„ë¡œí¼í‹° êµ¬í˜„
- ê°ì²´ì˜ í”„ë¡œí¼í‹°ê°€ ë°”ë€” ë•Œ ë§ˆë‹¤ ë¦¬ìŠ¤ë„ˆì—ê²Œ ë³€ê²½ í†µì§€ë¥¼ ë³´ë‚´ëŠ” ì˜ˆì œë¡œ ì•Œì•„ë³´ê¸°
- ì½”í‹€ë¦°ìœ¼ë¡œ ê¸°ì¡´ ë°©ì‹ëŒ€ë¡œ êµ¬í˜„í•˜ê¸°
  ```kotlin
  // PropertyChangeSupportë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ë„ìš°ë¯¸ í´ë˜ìŠ¤
  open class PropertyChangeAware {
      protected val changeSupport = PropertyChangeSupport(this)
      fun addPropertyChangeListener(listener: PropertyChangeListener) {
          changeSupport.addPropertyChangeListener(listener)
      }
  
      fun removePropertyChangeListener(listener: PropertyChangeListener) {
          changeSupport.removePropertyChangeListener(listener)
      }
  }
  
  class ObservableProperty(
      var propVal: Int,
      val changeSupport: PropertyChangeSupport
  ) {
      operator fun getValue(p: Person, prod: KProperty<*>): Int = propVal
      operator fun setValue(p: Person, prop: KProperty<*>, newVal: Int) {
          val oldVal = propVal
          propVal = newVal
          changeSupport.firePropertyChange(prop.name, oldVal, newVal)
      }
  }
  
  class Person(val name: String, age: Int
               , salary: Int) : PropertyChangeAware() {
  
      var age: Int by ObservableProperty(age, changeSupport)  // by í‚¤ì›Œë“œë¡œ ìœ„ì„ ê°ì²´ë¥¼ ì§€ì •
      var salary: Int by ObservableProperty(salary, changeSupport)
  }
  fun main () {
      val p = Person("Alice", 30, 2000)
      p.addPropertyChangeListener(    // í”„ë¡œí¼í‹° ë³€ê²½ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
          PropertyChangeListener { evt ->
              println("Property ${evt.propertyName} changed "
                      + "from ${evt.oldValue} to ${evt.newValue}")
          }
      )
  
      p.age = 35
      p.salary = 2100
  }
  ```
  - ì½”í‹€ë¦° ê´€ë¡€ë¥¼ ì‚¬ìš©í•˜ëŠ” ë‹¤ë¥¸ í•¨ìˆ˜ì²˜ëŸ¼ getValue()ì™€ setValue()ì— operator ë³€ê²½ì°¨ë¥¼ ë¶™ì„
  - KProperty íƒ€ì…ì˜ ê°ì²´ë¥¼ ì‚¬ìš©í•´ í”„ë¡œí¼í‹°ë¥¼ í‘œí˜„í•œë‹¤. (10.2ì ˆì— ìì„¸íˆ..)
  - by í‚¤ì›Œë“œë¡œ ìœ„ì„ ê°ì²´ë¥¼ ì§€ì •í•˜ë©´ ì§ì ‘ ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ í–ˆë˜ ë¶€ë¶„ì´ íšê¸°ì ìœ¼ë¡œ ì¤„ì–´ë“ ë‹¤.

- ê´€ì°° ê°€ëŠ¥í•œ í”„ë¡œí¼í‹° ë¡œì§ì„ ì‘ì„±í•˜ì§€ ì•Šê³ , ì½”í‹€ë¦° í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ë„ ëœë‹¤.
- í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ObservablePropertyì™€ ë¹„ìŠ·í•œ í´ë˜ìŠ¤ê°€ ìˆë‹¤.
- ë‹¨, ì´ í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” PropertyChangeSupportì™€ ì—°ê²°ë˜ì–´ ìˆì§€ ì•Šì•„,  
  í”„ë¡œí¼í‹° ê°’ ë³€ê²½ì„ í†µì§€í•  ë•Œ PropertyChangeSupportë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì•Œë ¤ì£¼ëŠ” ëŒìë¥¼  
  í•´ë‹¹ í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ í´ë˜ìŠ¤ì— ë„˜ê²¨ì•¼ í•œë‹¤.
  ```kotlin
  class Person(val name: String, age: Int
               , salary: Int) : PropertyChangeAware() {
      
      private val observer = {
          prop: KProperty<*>, oldVal: Int, newVal: Int ->
          changeSupport.firePropertyChange(prop.name, oldVal, newVal)
      }
      
      var age: Int by Delegates.observable(age, observer)
      var salary: Int by Delegates.observable(salary, observer)
  }
  ```
  - by ìš°í•­ì—ëŠ” ì»´íŒŒì¼ëŸ¬ê°€ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ì˜¬ë°”ë¥¸ íƒ€ì…ì˜ getValue()ì™€ setValue()ë§Œ ì œê³µí•˜ë©´  
    ë­ë“ ì§€ ì˜¬ ìˆ˜ ìˆë‹¤. (ì¸ìŠ¤í„´ìŠ¤, í•¨ìˆ˜, ë‹¤ë¥¸ í”„ë¡œí¼í‹°, ë‹¤ë¥¸ ì‹ ë“±..)

ğŸ’™ ìœ„ì„ í”„ë¡œí¼í‹° ì»´íŒŒì¼ ê·œì¹™
- ìœ„ì„ í”„ë¡œí¼í‹°ê°€ ìˆëŠ” í´ë˜ìŠ¤ ì˜ˆì‹œ
  ```kotlin
  class C {
      var prop: Type by MyDelegate()
  }
  ```
  - ì»´íŒŒì¼ëŸ¬ëŠ” MyDelegateí´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°ì¶°ì§„ í”„ë¡œí¼í‹°ì¸ <delegate>ì— ì €ì¥í•œë‹¤.
  - ì»´íŒŒì¼ëŸ¬ëŠ” í”„ë¡œí¼í‹°ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•´ KPropertyíƒ€ì…ì˜ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ê³  <property>ë¼ ë¶€ë¥¸ë‹¤.

- ì»´íŒŒì¼ëŸ¬ê°€ ìƒì„±í•˜ëŠ” ì½”ë“œ
  ```kotlin
  class C {
      private val <delegate> = MyDelegate()
      var prop: Type
          get() = <delegate>.getValue(this, <property>)
          set(value: Type) = <delegate>.setValue(this, <property>, value)
  }
  ```
  - ì»´íŒŒì¼ëŸ¬ëŠ” ëª¨ë“  í”„ë¡œí¼í‹° ì ‘ê·¼ì ì•Šì— getValueì™€ setValue ì½”ë“œë¥¼ ìƒì„±í•´ ì¤€ë‹¤.

ğŸ’™ í”„ë¡œí¼í‹° ê°’ì„ ë§µì— ì €ì¥
- í”„ë¡œí¼í‹°ë¥¼ ë™ì ìœ¼ë¡œ ì •ì˜í•  ìˆ˜ ìˆë„ë¡ ê°ì²´ë¥¼ ë§Œë“¤ ë•Œ ìœ„ì„ í”„ë¡œí¼í‹°ë¥¼ ì¢…ì¢… ì‚¬ìš©í•œë‹¤.
- ì´ëŸ¬í•œ ê°ì²´ = í™•ì¥ ê°€ëŠ¥í•œ ê°ì²´ ë¼ê³  ë¶€ë¥¸ë‹¤.
- ê°’ì„ ë§µì— ì €ì¥í•˜ëŠ” í”„ë¡œí¼í‹° ì •ì˜
  ```kotlin
  class Person {
      //ì¶”ê°€ ì •ë³´
      private val _attributes = hashMapOf<String, String>()
      fun setAttribute(attrName:String, value:String) {
          _attributes[attrName] = value
      }
  
      //í•„ìˆ˜ ì •ë³´
      val name: String
      get() = _attributes["name"]!! // ìˆ˜ë™ìœ¼ë¡œ ë§µì—ì„œ ì •ë³´ êº¼ë‚´ê¸°
  }
  
  fun main () {
      val p = Person()
      val data = mapOf("name" to "Alice", "company" to "JetBrains")
      for((attrName, value) in data)
          p.setAttribute(attrName, value)
      print(p.name)
  }
  
  Alice
  ```

- ê°’ì„ ë§µì— ì €ì¥í•˜ëŠ” ìœ„ì„ í”„ë¡œí¼í‹° ì‚¬ìš©
  ```kotlin
  class Person {
      //ì¶”ê°€ ì •ë³´
      private val _attributes = hashMapOf<String, String>()
      fun setAttribute(attrName:String, value:String) {
          _attributes[attrName] = value
      }
  
      //í•„ìˆ˜ ì •ë³´
      val name: String by _attributes // ìœ„ì„ í”„ë¡œí¼í‹°ë¡œ ë§µì„ ì‚¬ìš©
  }
  ```
  - í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” MautableMap ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•´ getValueì™€ setValue í™•ì¥ í•¨ìˆ˜ë¥¼ ì œê³µí•œë‹¤.
  - ë”°ë¼ì„œ ì½”ë“œê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•¨!
  
ğŸ’™ í”„ë ˆì„ì›Œí¬ì—ì„œ ìœ„ì„ í”„ë¡œí¼í‹° í™œìš©